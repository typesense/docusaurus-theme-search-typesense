# پرامپت: تنظیم پروژهٔ داکیوسورس برای زبان فارسی و تم جستجو

این پرامپت را در **پروژهٔ داکیوسورس شما** (سایتی که تم جستجو را نصب کرده) اجرا کنید.

---

## متن پرامپت (کپی کنید و به AI بدهید)

```
پروژهٔ من یک سایت Docusaurus است که از تم جستجو docusaurus-theme-search-typesense استفاده می‌کند. می‌خواهم زبان را برای فارسی تنظیم کنم و مطمئن شوم تم جستجو با تغییر زبان کاربر، ترجمهٔ درست را نشان می‌دهد.

کارها:

۱) در docusaurus.config.js (یا .ts) بخش i18n را بررسی/تنظیم کن:
   - defaultLocale را روی 'fa' یا 'en' بگذار (مثلاً اگر سایت پیش‌فرض فارسی است: 'fa').
   - locales را شامل 'en' و 'fa' (و در صورت نیاز 'fa-IR') کن.

۲) در themeConfig.typesense اگر لازم است localeOverride بگذار:
   - فقط در صورتی که می‌خواهی زبان جستجو را همیشه ثابت نگه داری (مثلاً همیشه فارسی) این را ست کن: localeOverride: 'fa'
   - اگر می‌خواهی با تغییر زبان کاربر در نوار بالا، زبان جستجو هم عوض شود، localeOverride نگذار (یا کامنت کن).

۳) اگر از window.env برای env استفاده می‌کنی و می‌خواهی زبان جستجو از آن بخواند، مطمئن شو قبل از لود تم یکی از این‌ها ست شده:
   - window.__SEARCH_THEME_LOCALE__ = 'fa'
   - یا window.env.LOCALE = 'fa'

۴) فایل‌های ترجمهٔ تم را چک کن:
   - در پروژهٔ من پوشهٔ i18n وجود دارد؟
   - برای هر زبان (مثلاً i18n/fa و i18n/en) فایل theme.json دارم؟ اگر نه، از پوشهٔ i18n داخل node_modules/docusaurus-theme-search-typesense می‌توانم کپی کنم.

۵) بعد از تغییرات، دستورهای دقیق برای بیلد و تست را بده (npm run build و npm run serve یا npm run start).
```

---

## سناریوی ساده برای تست تغییر زبان و ترجمهٔ جستجو

### هدف
می‌خواهی وقتی زبان سایت را عوض می‌کنی (مثلاً از فارسی به انگلیسی)، متن‌های جستجو (دکمه، مودال، صفحهٔ جستجو) هم به همان زبان عوض شوند.

### مراحل

1. **سایت را اجرا کن**
   - `npm run start` یا بعد از `npm run build` و `npm run serve` یکی از آدرس‌ها را باز کن (مثلاً `http://localhost:3000`).

2. **زبان پیش‌فرض را ببین**
   - اگر defaultLocale برابر `fa` است، صفحهٔ اول و نوار بالا باید فارسی باشد.
   - روی آیکون جستجو کلیک کن و مودال را باز کن؛ متن‌ها باید مطابق زبان فعلی باشند (مثلاً «جستجو»، «لغو»، «مشاهده همه X نتیجه»).

3. **زبان را عوض کن**
   - در نوار بالا معمولاً یک انتخابگر زبان (Language / زبان) هست (اگر i18n را فعال کرده باشی و چند locale داشته باشی).
   - زبان را به English (یا en) تغییر بده.

4. **صفحه و جستجو را دوباره چک کن**
   - آدرس عوض می‌شود (مثلاً به `/en/` می‌رود).
   - دوباره آیکون جستجو را بزن؛ مودال و دکمهٔ جستجو باید انگلیسی باشند (مثلاً "Search", "Cancel", "See all X results").
   - اگر صفحهٔ جستجو (`/search` یا `/en/search`) دارید، آن را هم باز کن و متن‌ها را چک کن.

5. **کنسول مرورگر**
   - F12 → Console. باید یک خط ببینی شبیه:
     `[docusaurus-theme-search-typesense] locale: en | source: context`
   - با عوض کردن زبان، بعد از رفرش یا رفتن به صفحهٔ زبان دیگر، مقدار `locale` باید عوض شود (مثلاً از `fa` به `en`).

---

## آیا بعد از عوض کردن زبان باید .docusaurus و build را پاک کنم؟

**خیر.** برای **تغییر زبان توسط کاربر** در همان بیلد، نیازی به پاک کردن `.docusaurus` یا پوشهٔ `build` نیست. فقط زبان را در UI عوض کن (یا به مسیر زبان دیگر برو، مثلاً `/en/`) و در صورت نیاز صفحه را رفرش کن.

**بله، در این موارد پاک کردن لازم است:**
- وقتی **خود تم جستجو** را آپدیت کردی (مثلاً نسخهٔ جدید از npm یا گیت‌هاب نصب کردی) و می‌خواهی تغییرات تم را ببینی.
- وقتی بعد از آپدیت تم، هنوز متن‌های قدیمی یا رفتار قبلی را می‌بینی.

در آن صورت:
- پوشه‌های `.docusaurus` و `build` را حذف کن.
- دوباره `npm run build` (و در صورت نیاز `npm run serve`) یا `npm run start` بزن.

خلاصه: **تغییر زبان در سایت = بدون پاک کردن کش.** **آپدیت تم = پاک کردن .docusaurus و build و بیلد مجدد.**
